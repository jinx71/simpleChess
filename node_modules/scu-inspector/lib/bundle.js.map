{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/processor.js","../src/applyCondition.js","../src/getDisplayName.js","../src/index.js"],"sourcesContent":["const _isEmpty = (v) => (\n  v === null ||\n  v === undefined ||\n  (v.hasOwnProperty('length') && v.length === 0) ||\n  (v.constructor === Object && Object.keys(v).length === 0)\n)\nconst _isExist = (v) => !_isEmpty(v)\nconst _isObject = (v) => !!v && v.constructor === Object\nconst _isArray = (v) => Array.isArray(v)\n\nexport const isEmpty = (...x) => x.every(_isEmpty)\nexport const isExist = (...x) => x.every(_isExist)\nexport const isBoolean = (v) => typeof v === 'boolean'\nexport const isString = (v) => typeof v === 'string'\nexport const isNumber = (v) => typeof v === 'number'\nexport const isObject = (...x) => x.every(_isObject)\nexport const isArray = (...x) => x.every(_isArray)\nexport const isFunction = (v) => typeof v === 'function'\nexport const isDiff = (a) => (b) => JSON.stringify(a) !== JSON.stringify(b)\nexport const diff = (a) => (b) => {\n  const aSet = new Set(a)\n  const bSet = new Set(b)\n  const filtered = new Set([...aSet].filter(x => !bSet.has(x)))\n\n  return Array.from(filtered)\n}\n","import * as Utils from './utils'\n\nexport default function processor (mode) {\n  return (props) => (res, key) => {\n    let { prevProp, nextProp } = props\n    let _isDiff\n\n    if (Utils.isFunction(nextProp)) {\n      return res\n    }\n\n    if (Utils.isBoolean(nextProp) || Utils.isString(nextProp) || Utils.isNumber(nextProp)) {\n      _isDiff = prevProp !== nextProp\n    }\n\n    if (Utils.isObject(nextProp) || Utils.isArray(nextProp)) {\n      _isDiff = Utils.isDiff(nextProp)(prevProp)\n\n      if (Utils.isArray(nextProp)) {\n        prevProp = Utils.diff(prevProp)(nextProp).join(', ')\n        nextProp = Utils.diff(nextProp)(prevProp).join(', ')\n      }\n    }\n\n    const shouldAppend = (\n      mode === 'all' ||\n      (mode === 'changed' && _isDiff) ||\n      (mode === 'none' && !_isDiff)\n    )\n\n    return shouldAppend\n      ? [{\n        ...res[0],\n        [key]: {\n          state: _isDiff ? 'CHANGED' : 'NONE',\n          prevProp,\n          nextProp\n        }\n      }]\n      : res\n  }\n}\n","import { isExist } from './utils'\n\nexport default function applyCondition (include, exclude) {\n  return (key) => isExist(include)\n    ? include.includes(key)\n    : !exclude.includes(key)\n}\n","import { isExist } from './utils'\n\nexport default function getDisplayName (target) {\n  const displayName = target.displayName || target.constructor.name || target.name\n\n  return (name) => `${displayName}${isExist(name) ? `-${name}` : ''}`\n}\n","import { isExist } from './utils'\nimport processor from './processor'\nimport applyCondition from './applyCondition'\nimport getDisplayName from './getDisplayName'\n\nconst __MODE__ = 'all'\nconst __INCLUDES__ = null\nconst __EXCLUDES__ = ['children']\nconst __THROW_MSG__ = 'It has to be applied to shouldComponentUpdate method'\n\nfunction scuInspector (options = {}) {\n  const {\n    uniqueKey = '',\n    isCollapsed = false,\n    debug = process.env.NODE_ENV !== 'production',\n    mode = __MODE__,\n    include = __INCLUDES__,\n    exclude = __EXCLUDES__\n  } = options\n  const _processor = processor(mode)\n  const _applyCondition = applyCondition(include, exclude)\n\n  if (!debug) {\n    return (target, name, descriptor) => descriptor\n  }\n\n  return (target, name, descriptor) => {\n    if (name !== 'shouldComponentUpdate') {\n      throw new Error(__THROW_MSG__)\n    }\n\n    const _getDisplayName = getDisplayName(target)\n    const oldValue = descriptor.value\n\n    descriptor.value = function (nextProps) {\n      const bool = oldValue.apply(this, arguments)\n\n      if (bool) {\n        const displayName = _getDisplayName(nextProps[uniqueKey])\n        const prevProps = this.props\n\n        /** @callback */\n        const _reducer = (res, key) => _processor({\n          prevProp: prevProps[key],\n          nextProp: nextProps[key],\n          prevProps,\n          nextProps\n        })(res, key)\n\n        /** @callback */\n        const _display = (result) => {\n          if (isExist(result)) {\n            const groupStart = console[isCollapsed ? 'groupCollapsed' : 'group']\n\n            groupStart(displayName)\n            console.table(result)\n            console.groupEnd()\n          }\n        }\n\n        Object.keys(nextProps)\n          .filter(_applyCondition)\n          .reduce(_reducer, [{}])\n          .forEach(_display)\n      }\n\n      return bool\n    }\n\n    return descriptor\n  }\n}\n\nexport default scuInspector\n"],"names":["_isEmpty","v","undefined","hasOwnProperty","length","constructor","Object","keys","_isExist","_isObject","_isArray","Array","isArray","isExist","x","every","isBoolean","isString","isNumber","isObject","isFunction","isDiff","a","b","JSON","stringify","diff","aSet","Set","bSet","filtered","filter","has","from","processor","mode","props","res","key","prevProp","nextProp","_isDiff","Utils","join","applyCondition","include","exclude","includes","getDisplayName","target","displayName","name","__MODE__","__INCLUDES__","__EXCLUDES__","__THROW_MSG__","scuInspector","options","uniqueKey","isCollapsed","debug","process","env","NODE_ENV","_processor","_applyCondition","descriptor","Error","_getDisplayName","oldValue","value","nextProps","bool","apply","this","arguments","prevProps","reduce","forEach","result","console","table","groupEnd"],"mappings":"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"}